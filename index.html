<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>No.</title>

  <meta name="description" content="No." />
  <meta property="og:title" content="No." />
  <meta property="og:description" content="The answer is no." />
  <meta property="og:type" content="website" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      height: 100%;
      overflow: hidden;
    }

    :root {
      color-scheme: light dark;
      --no-top: 38vh;
      --gap: clamp(10px, 2vh, 18px);
      --side-pad: clamp(16px, 4vw, 44px);
    }

    body {
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      text-align: center;
      padding: var(--side-pad);
      background: #ffffff;
      color: #111111;
      -webkit-font-smoothing: antialiased;
      text-rendering: optimizeLegibility;
    }

    @media (prefers-color-scheme: dark) {
      body {
        background: radial-gradient(circle at center, #1a1a1a, #0f0f0f);
        color: #ffffff;
      }
    }

    .no {
      position: fixed;
      left: 50%;
      top: var(--no-top);
      transform: translate(-50%, -50%);
      margin: 0;
      font-weight: 900;
      letter-spacing: -0.04em;
      line-height: 1;
      font-size: clamp(44px, 10vw, 100px);
      white-space: nowrap;
      user-select: none;
      pointer-events: none;
    }

    .reason {
      position: fixed;
      left: 50%;
      top: calc(var(--no-top) + var(--gap) + 56px);
      transform: translate(-50%, 10px);
      width: min(920px, calc(100vw - (2 * var(--side-pad))));
      margin: 0;

      font-size: clamp(16px, 3.2vw, 28px);
      line-height: 1.4;
      opacity: 0;
      overflow-wrap: anywhere;

      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 4;
      overflow: hidden;

      transition: opacity 250ms ease, transform 250ms ease;
      pointer-events: none;
    }

    .reason.loaded {
      opacity: 0.9;
      transform: translate(-50%, 0);
    }

    @media (min-height: 820px) {
      .reason { -webkit-line-clamp: 5; }
    }

    .footer {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      font-size: 12px;
      opacity: 0.55;
      white-space: nowrap;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <h1 class="no" id="noText">No.</h1>
  <p id="reason" class="reason" aria-live="polite">Loading…</p>
  <div class="footer">© <span id="year"></span> Dimuth. Thanks for stopping by!</div>

  <script>
    const API_URL = "https://naas.isalman.dev/no";
    const reasonEl = document.getElementById("reason");
    const noEl = document.getElementById("noText");
    const yearEl = document.getElementById("year");

	const variants = ["No.", "Nope.", "Absolutely not.", "Hard pass.", "That’s a no.", "Not today.", "Respectfully, no."];

    let loading = false;

    async function loadReason() {
      if (loading) return; // prevent spam clicking
      loading = true;

      noEl.textContent = variants[Math.floor(Math.random() * variants.length)];
      reasonEl.classList.remove("loaded");
      reasonEl.textContent = "Loading…";

      try {
        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 4000);

        const res = await fetch(API_URL + "?t=" + Date.now(), {
          headers: { "Accept": "application/json" },
          signal: controller.signal
        });

        clearTimeout(timeout);

        if (!res.ok) throw new Error("Network error");
        const data = await res.json();
        reasonEl.textContent = data?.reason || "No reason available.";
      } catch {
        reasonEl.textContent = "No reason available.";
      } finally {
        requestAnimationFrame(() => reasonEl.classList.add("loaded"));
        loading = false;
      }
    }

    document.addEventListener("click", loadReason);
    yearEl.textContent = new Date().getFullYear();

    loadReason();
  </script>
</body>
</html>
